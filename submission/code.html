<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title></title>
<style type="text/css">
/**
 * Prism.s theme ported from highlight.js's xcode style
 */
pre code {
  padding: 1em;
}
.token.comment {
  color: #007400;
}
.token.punctuation {
  color: #999;
}
.token.tag,
.token.selector {
  color: #aa0d91;
}
.token.boolean,
.token.number,
.token.constant,
.token.symbol {
  color: #1c00cf;
}
.token.property,
.token.attr-name,
.token.string,
.token.char,
.token.builtin {
  color: #c41a16;
}
.token.inserted {
  background-color: #ccffd8;
}
.token.deleted {
  background-color: #ffebe9;
}
.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: #9a6e3a;
}
.token.atrule,
.token.attr-value,
.token.keyword {
  color: #836c28;
}
.token.function,
.token.class-name {
  color: #DD4A68;
}
.token.regex,
.token.important,
.token.variable {
  color: #5c2699;
}
.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}
</style>
<style type="text/css">
body {
  font-family: sans-serif;
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 1.5;
  box-sizing: border-box;
}
body, .footnotes, code { font-size: .9em; }
li li { font-size: .95em; }
*, *:before, *:after {
  box-sizing: inherit;
}
pre, img { max-width: 100%; }
pre, pre:hover {
  white-space: pre-wrap;
  word-break: break-all;
}
pre code {
  display: block;
  overflow-x: auto;
}
code { font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace; }
:not(pre) > code, code[class] { background-color: #F8F8F8; }
code.language-undefined, pre > code:not([class]) {
  background-color: inherit;
  border: 1px solid #eee;
}
table {
  margin: auto;
  border-top: 1px solid #666;
}
table thead th { border-bottom: 1px solid #ddd; }
th, td { padding: 5px; }
thead, tfoot, tr:nth-child(even) { background: #eee; }
blockquote {
  color: #666;
  margin: 0;
  padding-left: 1em;
  border-left: 0.5em solid #eee;
}
hr, .footnotes::before { border: 1px dashed #ddd; }
.frontmatter { text-align: center; }
#TOC .numbered li { list-style: none; }
#TOC .numbered { padding-left: 0; }
#TOC .numbered ul { padding-left: 1em; }
table, .body h2 { border-bottom: 1px solid #666; }
.body .appendix, .appendix ~ h2 { border-bottom-style: dashed; }
.footnote-ref a::before { content: "["; }
.footnote-ref a::after { content: "]"; }
section.footnotes::before {
  content: "";
  display: block;
  max-width: 20em;
}

@media print {
  body {
    font-size: 12pt;
    max-width: 100%;
  }
  tr, img { page-break-inside: avoid; }
}
@media only screen and (min-width: 992px) {
  pre { white-space: pre; }
}
</style>
<script>
$(document).ready(function(){
    if (typeof $('[data-toggle="tooltip"]').tooltip === 'function') {
        $('[data-toggle="tooltip"]').tooltip();
    }
    if ($('[data-toggle="popover"]').popover === 'function') {
        $('[data-toggle="popover"]').popover();
    }
});
</script>
<link href="C:\Users\humphreys\AppData\Local\R\win-library\4.2\kableExtra\lightable-0.0.1\lightable.css" rel="stylesheet" />
</head>
<body>
<div class="frontmatter">
<div class="title"><h1></h1></div>
<div class="author"><h2></h2></div>
<div class="date"><h3></h3></div>
</div>
<div class="body">
<pre><code class="language-r"># R code for evaluated code chunks in CausalQueries.qmd
# &quot;Making, Updating, and Querying Causal Models using CausalQueries&quot;
# Till Tietz, Lily Medina, Georgiy Syunyaev, Macartan Humphreys
# Generated using: knitr::spin(&quot;code.R&quot;)
# 15 November 2023

## Set up
#####################################################################
</code></pre>
<pre><code class="language-r">data(&quot;lipids_data&quot;)

lipids_data
</code></pre>
<pre><code class="language-r">lipids_model &lt;-  
  make_model(&quot;Z -&gt; X -&gt; Y; X &lt;-&gt; Y&quot;) |&gt;
  update_model(lipids_data, refresh = 0)
</code></pre>
<pre><code class="language-r">lipids_queries &lt;- 
  lipids_model  |&gt;
  query_model(query = &quot;Y[X=1] - Y[X=0]&quot;,
              given = c(&quot;All&quot;,  &quot;X==0 &amp; Y==0&quot;, &quot;X[Z=1] &gt; X[Z=0]&quot;),
              using = &quot;posteriors&quot;) 
</code></pre>
<pre><code class="language-r">lipids_queries |&gt;
  dplyr::select(query, given, mean, sd, starts_with(&quot;cred&quot;)) |&gt;
  knitr::kable(
    digits = 2,
    booktabs = TRUE,
    align = &quot;c&quot;,
    escape = TRUE, 
    linesep = &quot;&quot;) |&gt; 
  kableExtra::kable_classic_2(latex_options = c(&quot;scale_down&quot;))
</code></pre>
<table class=" lightable-classic-2" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; margin-left: auto; margin-right: auto;'>
 <thead>
  <tr>
   <th style="text-align:center;"> query </th>
   <th style="text-align:center;"> given </th>
   <th style="text-align:center;"> mean </th>
   <th style="text-align:center;"> sd </th>
   <th style="text-align:center;"> cred.low </th>
   <th style="text-align:center;"> cred.high </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:center;"> Y[X=1] - Y[X=0] </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> 0.55 </td>
   <td style="text-align:center;"> 0.10 </td>
   <td style="text-align:center;"> 0.37 </td>
   <td style="text-align:center;"> 0.73 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y[X=1] - Y[X=0] </td>
   <td style="text-align:center;"> X==0 &amp; Y==0 </td>
   <td style="text-align:center;"> 0.64 </td>
   <td style="text-align:center;"> 0.15 </td>
   <td style="text-align:center;"> 0.37 </td>
   <td style="text-align:center;"> 0.89 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y[X=1] - Y[X=0] </td>
   <td style="text-align:center;"> X[Z=1] &gt; X[Z=0] </td>
   <td style="text-align:center;"> 0.70 </td>
   <td style="text-align:center;"> 0.05 </td>
   <td style="text-align:center;"> 0.59 </td>
   <td style="text-align:center;"> 0.80 </td>
  </tr>
</tbody>
</table>
<pre><code class="language-r">with_pars &lt;- 
  lipids_model |&gt;
  set_parameters(param_type = &quot;prior_draw&quot;) 

with_pars$parameters_df |&gt;
  dplyr::select(node,  nodal_type, param_set, param_names, param_value, priors) |&gt; 
  knitr::kable(
    digits = 2,
    booktabs = TRUE,
    align = &quot;c&quot;,
    escape = TRUE,
    longtable = TRUE,
    linesep = &quot;&quot;) |&gt; 
  kableExtra::kable_classic_2(latex_options = c(&quot;hold_position&quot;))
</code></pre>
<table class=" lightable-classic-2" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; margin-left: auto; margin-right: auto;'>
 <thead>
  <tr>
   <th style="text-align:center;"> node </th>
   <th style="text-align:center;"> nodal_type </th>
   <th style="text-align:center;"> param_set </th>
   <th style="text-align:center;"> param_names </th>
   <th style="text-align:center;"> param_value </th>
   <th style="text-align:center;"> priors </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:center;"> Z </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> Z </td>
   <td style="text-align:center;"> Z.0 </td>
   <td style="text-align:center;"> 0.57 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Z </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> Z </td>
   <td style="text-align:center;"> Z.1 </td>
   <td style="text-align:center;"> 0.43 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> X </td>
   <td style="text-align:center;"> 00 </td>
   <td style="text-align:center;"> X </td>
   <td style="text-align:center;"> X.00 </td>
   <td style="text-align:center;"> 0.24 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> X </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> X </td>
   <td style="text-align:center;"> X.10 </td>
   <td style="text-align:center;"> 0.30 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> X </td>
   <td style="text-align:center;"> 01 </td>
   <td style="text-align:center;"> X </td>
   <td style="text-align:center;"> X.01 </td>
   <td style="text-align:center;"> 0.20 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> X </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> X </td>
   <td style="text-align:center;"> X.11 </td>
   <td style="text-align:center;"> 0.27 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 00 </td>
   <td style="text-align:center;"> Y.X.00 </td>
   <td style="text-align:center;"> Y.00_X.00 </td>
   <td style="text-align:center;"> 0.71 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> Y.X.00 </td>
   <td style="text-align:center;"> Y.10_X.00 </td>
   <td style="text-align:center;"> 0.19 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 01 </td>
   <td style="text-align:center;"> Y.X.00 </td>
   <td style="text-align:center;"> Y.01_X.00 </td>
   <td style="text-align:center;"> 0.00 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> Y.X.00 </td>
   <td style="text-align:center;"> Y.11_X.00 </td>
   <td style="text-align:center;"> 0.10 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 00 </td>
   <td style="text-align:center;"> Y.X.01 </td>
   <td style="text-align:center;"> Y.00_X.01 </td>
   <td style="text-align:center;"> 0.15 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> Y.X.01 </td>
   <td style="text-align:center;"> Y.10_X.01 </td>
   <td style="text-align:center;"> 0.40 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 01 </td>
   <td style="text-align:center;"> Y.X.01 </td>
   <td style="text-align:center;"> Y.01_X.01 </td>
   <td style="text-align:center;"> 0.39 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> Y.X.01 </td>
   <td style="text-align:center;"> Y.11_X.01 </td>
   <td style="text-align:center;"> 0.06 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 00 </td>
   <td style="text-align:center;"> Y.X.10 </td>
   <td style="text-align:center;"> Y.00_X.10 </td>
   <td style="text-align:center;"> 0.17 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> Y.X.10 </td>
   <td style="text-align:center;"> Y.10_X.10 </td>
   <td style="text-align:center;"> 0.65 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 01 </td>
   <td style="text-align:center;"> Y.X.10 </td>
   <td style="text-align:center;"> Y.01_X.10 </td>
   <td style="text-align:center;"> 0.14 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> Y.X.10 </td>
   <td style="text-align:center;"> Y.11_X.10 </td>
   <td style="text-align:center;"> 0.04 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 00 </td>
   <td style="text-align:center;"> Y.X.11 </td>
   <td style="text-align:center;"> Y.00_X.11 </td>
   <td style="text-align:center;"> 0.24 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> Y.X.11 </td>
   <td style="text-align:center;"> Y.10_X.11 </td>
   <td style="text-align:center;"> 0.71 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 01 </td>
   <td style="text-align:center;"> Y.X.11 </td>
   <td style="text-align:center;"> Y.01_X.11 </td>
   <td style="text-align:center;"> 0.04 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Y </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> Y.X.11 </td>
   <td style="text-align:center;"> Y.11_X.11 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
</tbody>
</table>
<pre><code class="language-r">model &lt;- make_model(&quot;X -&gt; M -&gt; Y &lt;- X&quot;)
</code></pre>
<pre><code class="language-r">lipids_model |&gt; plot()

lipids_model |&gt;
  plot(x_coord = 1:3,
       y_coord = c(3,2,1),
       textcol = &quot;white&quot;,
       textsize = 3,
       shape = 18,
       nodecol = &quot;grey&quot;,
       nodesize = 12)
</code></pre>
<p><img src="data:image/png;base64,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" alt="Examples of model graphs." /><img src="data:image/png;base64,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" alt="Examples of model graphs." /></p>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;) |&gt; 
  grab(&quot;parameters_df&quot;) 
</code></pre>
<pre><code>## Mapping of model parameters to nodal types: 
## 
## ----------------------------------------------------------------
## 
##  param_names: name of parameter
##  node: name of endogeneous node associated with the parameter
##  gen: partial causal ordering of the parameter's node
##  param_set: parameter groupings forming a simplex
##  given: if model has confounding gives conditioning nodal type
##  param_value: parameter values
##  priors: hyperparameters of the prior Dirichlet distribution 
## 
## ----------------------------------------------------------------
## 
##   param_names node gen param_set nodal_type given param_value priors
## 1         X.0    X   1         X          0              0.50      1
## 2         X.1    X   1         X          1              0.50      1
## 3        Y.00    Y   2         Y         00              0.25      1
## 4        Y.10    Y   2         Y         10              0.25      1
## 5        Y.01    Y   2         Y         01              0.25      1
## 6        Y.11    Y   2         Y         11              0.25      1
</code></pre>
<pre><code class="language-r">make_model(&quot;X -&gt; Y &lt;- M; W -&gt; Y&quot;) |&gt; 
  interpret_type(nodes = &quot;Y&quot;)
</code></pre>
<pre><code>## $Y
##   node position     display            interpretation
## 1    Y        1 Y[*]******* Y | M = 0 &amp; W = 0 &amp; X = 0
## 2    Y        2 Y*[*]****** Y | M = 1 &amp; W = 0 &amp; X = 0
## 3    Y        3 Y**[*]***** Y | M = 0 &amp; W = 1 &amp; X = 0
## 4    Y        4 Y***[*]**** Y | M = 1 &amp; W = 1 &amp; X = 0
## 5    Y        5 Y****[*]*** Y | M = 0 &amp; W = 0 &amp; X = 1
## 6    Y        6 Y*****[*]** Y | M = 1 &amp; W = 0 &amp; X = 1
## 7    Y        7 Y******[*]* Y | M = 0 &amp; W = 1 &amp; X = 1
## 8    Y        8 Y*******[*] Y | M = 1 &amp; W = 1 &amp; X = 1
</code></pre>
<pre><code class="language-r">lipids_model |&gt; 
  grab(&quot;causal_types&quot;)
</code></pre>
<pre><code>## 
## Causal Types: 
## cartesian product of nodal types
## 
## 
##  first 10 causal types: 
##            Z  X  Y
## Z0.X00.Y00 0 00 00
## Z1.X00.Y00 1 00 00
## Z0.X10.Y00 0 10 00
## Z1.X10.Y00 1 10 00
## Z0.X01.Y00 0 01 00
## Z1.X01.Y00 1 01 00
## Z0.X11.Y00 0 11 00
## Z1.X11.Y00 1 11 00
## Z0.X00.Y10 0 00 10
## Z1.X00.Y10 1 00 10
</code></pre>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;) |&gt; 
  grab(&quot;parameter_matrix&quot;)
</code></pre>
<pre><code>## 
## Rows are parameters, grouped in parameter sets
## 
## Columns are causal types
## 
## Cell entries indicate whether a parameter probability isused
## in the calculation of causal type probability
## 
## 
##  
##  param_set  (P)
## 
</code></pre>
<pre><code class="language-r"> make_model(&quot;X -&gt; Y&quot;) |&gt;
   set_parameter_matrix()
</code></pre>
<pre><code>## 
## Statement: 
## X -&gt; Y
## 
## Number of types by node:
## X Y 
## 2 4 
## 
## Number of unit types: 8
</code></pre>
<pre><code class="language-r">model_restricted &lt;- 
  lipids_model |&gt; 
  set_restrictions(&quot;X[Z=1] &lt; X[Z=0]&quot;)
</code></pre>
<pre><code class="language-r"> model &lt;- lipids_model |&gt;
   set_restrictions(labels = list(X = &quot;01&quot;, Y = c(&quot;00&quot;, &quot;01&quot;, &quot;11&quot;)),
                    keep = TRUE)
</code></pre>
<pre><code class="language-r"> model &lt;- lipids_model |&gt;
   set_restrictions(labels = list(Y = &quot;?0&quot;))
</code></pre>
<pre><code class="language-r">model &lt;- lipids_model |&gt;
   set_restrictions(labels = list(Y = c('00', '11')), given = 'X.00')
</code></pre>
<pre><code class="language-r">statements &lt;- list(&quot;X -&gt; Y &lt;- W&quot;, 
                   &quot;X -&gt; Y &lt;- W; X &lt;-&gt; W&quot;, 
                   &quot;X -&gt; Y &lt;- W; X &lt;-&gt; Y; W &lt;-&gt; Y&quot;,
                   &quot;X -&gt; Y &lt;- W; X &lt;-&gt; Y; W &lt;-&gt; Y; X &lt;-&gt; W&quot;, 
                   &quot;X -&gt; W -&gt; Y &lt;- X&quot;,
                   &quot;X -&gt; W -&gt; Y &lt;- X; W &lt;-&gt; Y&quot;,
                   &quot;X -&gt; W -&gt; Y &lt;- X; X &lt;-&gt; W; W &lt;-&gt; Y&quot;, 
                   &quot;X -&gt; W -&gt; Y &lt;- X; X &lt;-&gt; W; W &lt;-&gt; Y; X &lt;-&gt; Y&quot;)

dof &lt;- function(statement) {
  make_model(statement, add_causal_types = FALSE) |&gt;
  grab(&quot;parameters_df&quot;)  |&gt;
  group_by(param_set) |&gt;
  summarize(n  = n() - 1) |&gt;
  pull(n) |&gt;
  sum()
}
  

statements |&gt; 
  lapply(function(s) paste0(&quot;`&quot;, s, &quot;`&quot;)) |&gt; 
  unlist() |&gt; 
  data.frame(
    Model = _,
    dof = unlist(lapply(statements, dof))) |&gt;
  knitr::kable(
    digits = 2,
    booktabs = TRUE,
    align = c(&quot;l&quot;, &quot;c&quot;),
    escape = TRUE, 
    linesep = &quot;&quot;,
    col.names = c(&quot;Model&quot;, &quot;Degrees of freedom&quot;)) 
</code></pre>
<table>
<thead>
<tr>
<th align="left">Model</th>
<th align="center">Degrees of freedom</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>X -&gt; Y &lt;- W</code></td>
<td align="center">17</td>
</tr>
<tr>
<td align="left"><code>X -&gt; Y &lt;- W; X &lt;-&gt; W</code></td>
<td align="center">18</td>
</tr>
<tr>
<td align="left"><code>X -&gt; Y &lt;- W; X &lt;-&gt; Y; W &lt;-&gt; Y</code></td>
<td align="center">62</td>
</tr>
<tr>
<td align="left"><code>X -&gt; Y &lt;- W; X &lt;-&gt; Y; W &lt;-&gt; Y; X &lt;-&gt; W</code></td>
<td align="center">63</td>
</tr>
<tr>
<td align="left"><code>X -&gt; W -&gt; Y &lt;- X</code></td>
<td align="center">19</td>
</tr>
<tr>
<td align="left"><code>X -&gt; W -&gt; Y &lt;- X; W &lt;-&gt; Y</code></td>
<td align="center">64</td>
</tr>
<tr>
<td align="left"><code>X -&gt; W -&gt; Y &lt;- X; X &lt;-&gt; W; W &lt;-&gt; Y</code></td>
<td align="center">67</td>
</tr>
<tr>
<td align="left"><code>X -&gt; W -&gt; Y &lt;- X; X &lt;-&gt; W; W &lt;-&gt; Y; X &lt;-&gt; Y</code></td>
<td align="center">127</td>
</tr>
</tbody>
</table>
<pre><code class="language-r">lipids_model |&gt; grab(&quot;prior_hyperparameters&quot;, &quot;X&quot;) 
</code></pre>
<pre><code>##       Z.0       Z.1      X.00      X.10      X.01      X.11 Y.00_X.00 Y.10_X.00 Y.01_X.00 
##         1         1         1         1         1         1         1         1         1 
## Y.11_X.00 Y.00_X.01 Y.10_X.01 Y.01_X.01 Y.11_X.01 Y.00_X.10 Y.10_X.10 Y.01_X.10 Y.11_X.10 
##         1         1         1         1         1         1         1         1         1 
## Y.00_X.11 Y.10_X.11 Y.01_X.11 Y.11_X.11 
##         1         1         1         1
</code></pre>
<pre><code class="language-r"> model &lt;- lipids_model |&gt;
   set_priors(distribution = &quot;jeffreys&quot;)
</code></pre>
<pre><code>## No specific parameters to alter values for specified. Altering all parameters.
</code></pre>
<pre><code class="language-r">lipids_model |&gt; 
  set_priors(node = &quot;X&quot;, alphas = 1:4) |&gt; 
  grab(&quot;prior_hyperparameters&quot;, &quot;X&quot;)
</code></pre>
<pre><code>## Warning in make_par_values(model = model, alter = &quot;priors&quot;, x = alphas, : A specified condition
## matches multiple parameters. In these cases it is unclear which parameter value should be
## assigned to which parameter. Assignment thus defaults to the order in which parameters appear in
## 'parameters_df'. We advise checking that parameter assignment was carried out as you intended.
</code></pre>
<pre><code>##       Z.0       Z.1      X.00      X.10      X.01      X.11 Y.00_X.00 Y.10_X.00 Y.01_X.00 
##         1         1         1         2         3         4         1         1         1 
## Y.11_X.00 Y.00_X.01 Y.10_X.01 Y.01_X.01 Y.11_X.01 Y.00_X.10 Y.10_X.10 Y.01_X.10 Y.11_X.10 
##         1         1         1         1         1         1         1         1         1 
## Y.00_X.11 Y.10_X.11 Y.01_X.11 Y.11_X.11 
##         1         1         1         1
</code></pre>
<pre><code class="language-r">lipids_model |&gt;
  set_priors(statement = &quot;X[Z=1] &gt; X[Z=0]&quot;, alphas = 3) |&gt;
  grab(&quot;prior_hyperparameters&quot;, &quot;X&quot;)
</code></pre>
<pre><code>##       Z.0       Z.1      X.00      X.10      X.01      X.11 Y.00_X.00 Y.10_X.00 Y.01_X.00 
##         1         1         1         1         3         1         1         1         1 
## Y.11_X.00 Y.00_X.01 Y.10_X.01 Y.01_X.01 Y.11_X.01 Y.00_X.10 Y.10_X.10 Y.01_X.10 Y.11_X.10 
##         1         1         1         1         1         1         1         1         1 
## Y.00_X.11 Y.10_X.11 Y.01_X.11 Y.11_X.11 
##         1         1         1         1
</code></pre>
<pre><code class="language-r"> make_model(&quot;X -&gt; Y&quot;) |&gt;
   query_model(&quot;Y[X=1] &gt; Y[X=0]&quot;, using = &quot;priors&quot;)
</code></pre>
<pre><code>## 
## Causal queries generated by query_model (all at population level)
</code></pre>
<pre><code class="language-r"> make_model(&quot;X -&gt; M -&gt; Y&quot;) |&gt;
   query_model(&quot;Y[X=1] &gt; Y[X=0]&quot;, using = &quot;priors&quot;)
</code></pre>
<pre><code>## 
## Causal queries generated by query_model (all at population level)
</code></pre>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;) |&gt; 
  grab(&quot;parameters&quot;)
</code></pre>
<pre><code>## Model parameters with associated probabilities: 
## 
## X.0 X.1 Y.00 Y.10 Y.01 Y.11
## 0.5 0.5 0.25 0.25 0.25 0.25
</code></pre>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;) |&gt;
  set_parameters(statement = &quot;Y[X=1] &gt; Y[X=0]&quot;, parameters = .7) |&gt;
  grab(&quot;parameters&quot;)
</code></pre>
<pre><code>## Model parameters with associated probabilities: 
## 
## X.0 X.1 Y.00 Y.10 Y.01 Y.11
## 0.5 0.5 0.1 0.1 0.7 0.1
</code></pre>
<pre><code class="language-r">sample_data_1 &lt;- 
  lipids_model |&gt; 
  make_data(n = 4)
</code></pre>
<pre><code class="language-r">lipids_model |&gt;
  make_data(n = 3, param_type = &quot;prior_draw&quot;)
</code></pre>
<pre><code class="language-r">sample_data_2 &lt;-
  lipids_model |&gt;
  make_data(n = 8,
            nodes = list(c(&quot;Z&quot;, &quot;Y&quot;), &quot;X&quot;),
            probs = list(1, .5),
            subsets = list(TRUE, &quot;Z==1 &amp; Y==0&quot;),
            verbose = FALSE)

sample_data_2
</code></pre>
<pre><code class="language-r">sample_data_2 |&gt; collapse_data(lipids_model)
</code></pre>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;) |&gt; 
  grab(&quot;parameter_mapping&quot;) 
</code></pre>
<pre><code>##      X0Y0 X1Y0 X0Y1 X1Y1
## X.0     1    0    1    0
## X.1     0    1    0    1
## Y.00    1    1    0    0
## Y.10    0    1    1    0
## Y.01    1    0    0    1
## Y.11    0    0    1    1
## attr(,&quot;map&quot;)
##      X0Y0 X1Y0 X0Y1 X1Y1
## X0Y0    1    0    0    0
## X1Y0    0    1    0    0
## X0Y1    0    0    1    0
## X1Y1    0    0    0    1
</code></pre>
<pre><code class="language-r">model &lt;- update_model(model, data)
</code></pre>
<pre><code class="language-r">list(uncensored = 
       make_model(&quot;X -&gt; Y&quot;) |&gt; 
       update_model(data.frame(X = rep(0:1,5), Y = rep(0:1,5)),
                    refresh = 0, iter = 3000),
     censored = 
       make_model(&quot;X -&gt; Y&quot;) |&gt; 
       update_model(data.frame(X = rep(0:1,5), Y = rep(0:1,5)),
                    censored_types = c(&quot;X1Y0&quot;,  &quot;X0Y1&quot;),
                    refresh = 0, iter = 3000))  |&gt;
  query_model(te(&quot;X&quot;, &quot;Y&quot;), using = &quot;posteriors&quot;) |&gt;
  dplyr::select(model, query, mean, sd) |&gt;
  knitr::kable(
    digits = 2,
    booktabs = TRUE,
    align = &quot;c&quot;,
    escape = TRUE, 
    linesep = &quot;&quot;) |&gt; 
  kableExtra::kable_classic_2()
</code></pre>
<table class=" lightable-classic-2" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; margin-left: auto; margin-right: auto;'>
 <thead>
  <tr>
   <th style="text-align:center;"> model </th>
   <th style="text-align:center;"> query </th>
   <th style="text-align:center;"> mean </th>
   <th style="text-align:center;"> sd </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:center;"> uncensored </td>
   <td style="text-align:center;"> (Y[X=1] - Y[X=0]) </td>
   <td style="text-align:center;"> 0.59 </td>
   <td style="text-align:center;"> 0.20 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> censored </td>
   <td style="text-align:center;"> (Y[X=1] - Y[X=0]) </td>
   <td style="text-align:center;"> 0.02 </td>
   <td style="text-align:center;"> 0.33 </td>
  </tr>
</tbody>
</table>
<pre><code class="language-r"> make_model(&quot;X -&gt; Y&quot;)  |&gt;
   update_model() |&gt;
   grab(&quot;posterior_distribution&quot;)
</code></pre>
<pre><code>## No data provided
</code></pre>
<pre><code>## Summary statistics of model parameter posterior distributions:
## : 4000 rows (draws) by 6 cols (parameters)
## 
##      mean   sd
## X.0  0.50 0.29
## X.1  0.50 0.29
## Y.00 0.25 0.19
## Y.10 0.24 0.19
## Y.01 0.25 0.19
## Y.11 0.25 0.20
</code></pre>
<pre><code class="language-r"> lipids_model &lt;-
   lipids_model |&gt;
   update_model(keep_fit = TRUE,
                keep_event_probabilities = TRUE)
</code></pre>
<pre><code>## No data provided
</code></pre>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;)  |&gt; 
  update_model(keep_type_distribution = FALSE) |&gt;
  grab(&quot;stan_summary&quot;) 
</code></pre>
<pre><code>## No data provided
</code></pre>
<pre><code>## Inference for Stan model: simplexes.
## 4 chains, each with iter=2000; warmup=1000; thin=1; 
## post-warmup draws per chain=1000, total post-warmup draws=4000.
## 
##             mean se_mean   sd   2.5%   25%   50%   75% 97.5% n_eff Rhat
## X.0         0.51    0.01 0.29   0.02  0.26  0.51  0.76  0.98  3042    1
## X.1         0.49    0.01 0.29   0.02  0.24  0.49  0.74  0.98  3042    1
## Y.00        0.25    0.00 0.19   0.01  0.09  0.21  0.37  0.71  1959    1
## Y.10        0.25    0.00 0.20   0.01  0.09  0.20  0.37  0.72  4064    1
## Y.01        0.25    0.00 0.19   0.01  0.09  0.20  0.37  0.71  3730    1
## Y.11        0.25    0.00 0.20   0.01  0.09  0.20  0.37  0.72  5122    1
## lp__       -7.54    0.04 1.62 -11.46 -8.39 -7.16 -6.35 -5.45  1412    1
## 
## Samples were drawn using NUTS(diag_e) at Wed Apr 17 18:26:10 2024.
## For each parameter, n_eff is a crude measure of effective sample size,
## and Rhat is the potential scale reduction factor on split chains (at 
## convergence, Rhat=1).
</code></pre>
<pre><code class="language-r">model &lt;- make_model(&quot;X -&gt; Y&quot;) |&gt; 
  update_model(refresh = 0, keep_fit = TRUE)
</code></pre>
<pre><code>## No data provided
</code></pre>
<pre><code class="language-r">model |&gt; grab(&quot;stan_fit&quot;)
</code></pre>
<pre><code>## Inference for Stan model: simplexes.
## 4 chains, each with iter=2000; warmup=1000; thin=1; 
## post-warmup draws per chain=1000, total post-warmup draws=4000.
## 
##             mean se_mean   sd   2.5%   25%   50%   75% 97.5% n_eff Rhat
## lambdas[1]  0.50    0.01 0.29   0.03  0.26  0.51  0.75  0.97  2989    1
## lambdas[2]  0.50    0.01 0.29   0.03  0.25  0.49  0.74  0.97  2989    1
## lambdas[3]  0.25    0.00 0.19   0.01  0.09  0.21  0.37  0.71  1868    1
## lambdas[4]  0.25    0.00 0.19   0.01  0.09  0.21  0.37  0.71  4211    1
## lambdas[5]  0.25    0.00 0.20   0.01  0.09  0.20  0.37  0.71  4126    1
## lambdas[6]  0.25    0.00 0.19   0.01  0.09  0.20  0.37  0.71  4041    1
## types[1]    0.13    0.00 0.13   0.00  0.03  0.08  0.18  0.48  2259    1
## types[2]    0.13    0.00 0.13   0.00  0.03  0.08  0.18  0.49  2255    1
## types[3]    0.13    0.00 0.13   0.00  0.03  0.08  0.18  0.48  3468    1
## types[4]    0.12    0.00 0.13   0.00  0.03  0.08  0.18  0.48  3215    1
## types[5]    0.13    0.00 0.14   0.00  0.03  0.08  0.18  0.50  3515    1
## types[6]    0.12    0.00 0.13   0.00  0.02  0.08  0.18  0.48  3378    1
## types[7]    0.13    0.00 0.14   0.00  0.03  0.08  0.18  0.50  3255    1
## types[8]    0.12    0.00 0.13   0.00  0.03  0.08  0.18  0.49  3271    1
## lp__       -7.58    0.05 1.67 -11.74 -8.45 -7.24 -6.34 -5.42  1254    1
## 
## Samples were drawn using NUTS(diag_e) at Wed Apr 17 18:26:34 2024.
## For each parameter, n_eff is a crude measure of effective sample size,
## and Rhat is the potential scale reduction factor on split chains (at 
## convergence, Rhat=1).
</code></pre>
<pre><code class="language-r">np &lt;- model |&gt; grab(&quot;stan_fit&quot;) |&gt; bayesplot::nuts_params()

model |&gt; grab(&quot;stan_fit&quot;) |&gt;
  bayesplot::mcmc_trace(pars = &quot;lambdas[5]&quot;, np = np) +
  ylab(&quot;trace for fifth element of lambda&quot;)
</code></pre>
<pre><code>## No divergences to plot.
</code></pre>
<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-41" /></p>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;) |&gt; realise_outcomes()
</code></pre>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;) |&gt; realise_outcomes(dos = list(X = 1))
</code></pre>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;)  |&gt; get_query_types(&quot;Y==1&quot;)
</code></pre>
<pre><code>## 
## Causal types satisfying query's condition(s)  
## 
##  query =  Y==1 
## 
## X0.Y10  X1.Y01
## X0.Y11  X1.Y11
## 
## 
##  Number of causal types that meet condition(s) =  4
##  Total number of causal types in model =  8
</code></pre>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;)  |&gt; get_query_types(&quot;Y[X=1]==1&quot;)
</code></pre>
<pre><code>## 
## Causal types satisfying query's condition(s)  
## 
##  query =  Y[X=1]==1 
## 
## X0.Y01  X1.Y01
## X0.Y11  X1.Y11
## 
## 
##  Number of causal types that meet condition(s) =  4
##  Total number of causal types in model =  8
</code></pre>
<pre><code class="language-r">make_model(&quot;X1 -&gt; Y &lt;- X2&quot;)  |&gt;
  get_query_types(&quot;X1==1 &amp; X2==1 &amp; (Y[X1=1, X2=1] &gt; Y[X1=0, X2=0])&quot;)
</code></pre>
<pre><code>## 
## Causal types satisfying query's condition(s)  
## 
##  query =  X1==1&amp;X2==1&amp;(Y[X1=1,X2=1]&gt;Y[X1=0,X2=0]) 
## 
## X11.X21.Y0001  X11.X21.Y0101
## X11.X21.Y0011  X11.X21.Y0111
## 
## 
##  Number of causal types that meet condition(s) =  4
##  Total number of causal types in model =  64
</code></pre>
<pre><code class="language-r">make_model(&quot;X -&gt; Y&quot;)  |&gt; get_query_types(&quot;Y[X=1] - Y[X=0]&quot;)
</code></pre>
<pre><code>## X0.Y00 X1.Y00 X0.Y10 X1.Y10 X0.Y01 X1.Y01 X0.Y11 X1.Y11 
##      0      0     -1     -1      1      1      0      0
</code></pre>
<pre><code class="language-r">data  &lt;- data.frame(X = rep(0:1, 50), Y = rep(0:1, 50))

model &lt;- 
  make_model(&quot;X -&gt; Y&quot;) |&gt;
  update_model(data, iter  = 4000, refresh = 0)

model |&gt; grab(&quot;posterior_distribution&quot;)  |&gt; 
  ggplot(aes(Y.01 - Y.10)) + geom_histogram() 
</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
</code></pre>
<div class="figure" style="text-align: center">
<img src="data:image/png;base64,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" alt="Posterior on &quot;Probability $Y$ is increasing in $X$&quot;." width="60%" />
<p class="caption">Posterior on "Probability $Y$ is increasing in $X$".</p>
</div>
<pre><code class="language-r"># &quot;Results for a case level query&quot;

make_model(&quot;X -&gt; M -&gt; Y&quot;) |&gt;
  update_model(data.frame(X = rep(0:1, 8), Y = rep(0:1, 8)), iter = 4000) |&gt;
  query_model(&quot;Y[X=1] &gt; Y[X=0]&quot;, 
            given = &quot;X==1 &amp; Y==1 &amp; M==1&quot;, 
            using = &quot;posteriors&quot;,
            case_level = c(TRUE, FALSE)) 
</code></pre>
<pre><code>## 
## Causal queries generated by query_model
</code></pre>
<pre><code class="language-r">queries |&gt;
  dplyr::select(-starts_with(&quot;cred&quot;)) |&gt; 
  knitr::kable(
    digits = 2,
    booktabs = TRUE,
    align = &quot;c&quot;,
    escape = TRUE,
    longtable = TRUE,
    linesep = &quot;&quot;) |&gt; 
  kableExtra::kable_classic_2(latex_options = c(&quot;hold_position&quot;))
</code></pre>
<table class=" lightable-classic-2" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; margin-left: auto; margin-right: auto;'>
 <thead>
  <tr>
   <th style="text-align:center;"> model </th>
   <th style="text-align:center;"> query </th>
   <th style="text-align:center;"> given </th>
   <th style="text-align:center;"> using </th>
   <th style="text-align:center;"> case_level </th>
   <th style="text-align:center;"> mean </th>
   <th style="text-align:center;"> sd </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.00 </td>
   <td style="text-align:center;"> 0.20 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.00 </td>
   <td style="text-align:center;"> 0.22 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.56 </td>
   <td style="text-align:center;"> 0.10 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.56 </td>
   <td style="text-align:center;"> 0.10 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.50 </td>
   <td style="text-align:center;"> 0.22 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.50 </td>
   <td style="text-align:center;"> 0.25 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.95 </td>
   <td style="text-align:center;"> 0.04 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.95 </td>
   <td style="text-align:center;"> 0.04 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.25 </td>
   <td style="text-align:center;"> 0.12 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.25 </td>
   <td style="text-align:center;"> 0.13 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.61 </td>
   <td style="text-align:center;"> 0.10 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.61 </td>
   <td style="text-align:center;"> 0.10 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.50 </td>
   <td style="text-align:center;"> 0.22 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.50 </td>
   <td style="text-align:center;"> 0.25 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.95 </td>
   <td style="text-align:center;"> 0.04 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> FALSE </td>
   <td style="text-align:center;"> 0.95 </td>
   <td style="text-align:center;"> 0.04 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.00 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.00 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.56 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.56 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.50 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.50 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.95 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> ATE </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.95 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.25 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.25 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.61 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> - </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.61 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.50 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> priors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.50 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> A </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.95 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
  <tr>
   <td style="text-align:center;"> B </td>
   <td style="text-align:center;"> POS </td>
   <td style="text-align:center;"> Y==1 &amp; X==1 </td>
   <td style="text-align:center;"> posteriors </td>
   <td style="text-align:center;"> TRUE </td>
   <td style="text-align:center;"> 0.95 </td>
   <td style="text-align:center;"> NA </td>
  </tr>
</tbody>
</table>
<pre><code class="language-r">CausalQueries:::stanmodels$simplexes
</code></pre>
<pre><code>## S4 class stanmodel 'simplexes' coded as follows:
## functions{
##   row_vector col_sums(matrix X) {
##     row_vector[cols(X)] s ;
##     s = rep_row_vector(1, rows(X)) * X ;
##     return s ;
##   }
## }
## data {
## int&lt;lower=1&gt; n_params;
## int&lt;lower=1&gt; n_paths;
## int&lt;lower=1&gt; n_types;
## int&lt;lower=1&gt; n_param_sets;
## int&lt;lower=1&gt; n_nodes;
## array[n_param_sets] int&lt;lower=1&gt; n_param_each;
## int&lt;lower=1&gt; n_data;
## int&lt;lower=1&gt; n_events;
## int&lt;lower=1&gt; n_strategies;
## int&lt;lower=0, upper=1&gt; keep_type_distribution;
## vector&lt;lower=0&gt;[n_params] lambdas_prior;
## array[n_param_sets] int&lt;lower=1&gt; l_starts;
## array[n_param_sets] int&lt;lower=1&gt; l_ends;
## array[n_nodes] int&lt;lower=1&gt; node_starts;
## array[n_nodes] int&lt;lower=1&gt; node_ends;
## array[n_strategies] int&lt;lower=1&gt; strategy_starts;
## array[n_strategies] int&lt;lower=1&gt; strategy_ends;
## matrix[n_params, n_types] P;
## matrix[n_params, n_paths] parmap;
## matrix[n_paths, n_data] map;
## matrix&lt;lower=0,upper=1&gt;[n_events,n_data] E;
## array[n_events] int&lt;lower=0&gt; Y;
## }
## parameters {
## vector&lt;lower=0&gt;[n_params - n_param_sets] gamma;
## }
## transformed parameters {
## vector&lt;lower=0, upper=1&gt;[n_params] lambdas;
## vector&lt;lower=1&gt;[n_param_sets] sum_gammas;
## matrix[n_params, n_paths] parlam;
## matrix[n_nodes, n_paths] parlam2;
## vector&lt;lower=0, upper=1&gt;[n_paths] w_0;
## vector&lt;lower=0, upper=1&gt;[n_data] w;
## vector&lt;lower=0, upper=1&gt;[n_events] w_full;
## // Cases in which a parameter set has only one value need special handling
## // they have no gamma components and sum_gamma needs to be made manually
## for (i in 1:n_param_sets) {
##   if (l_starts[i] &gt;= l_ends[i]) {
##     sum_gammas[i] = 1;
##     // syntax here to return unity as a vector
##     lambdas[l_starts[i]] = lambdas_prior[1]/lambdas_prior[1];
##     }
##   else if (l_starts[i] &lt; l_ends[i]) {
##     sum_gammas[i] =
##     1 + sum(gamma[(l_starts[i] - (i-1)):(l_ends[i] - i)]);
##     lambdas[l_starts[i]:l_ends[i]] =
##     append_row(1, gamma[(l_starts[i] - (i-1)):(l_ends[i] - i)]) /
##       sum_gammas[i];
##     }
##   }
## // Mapping from parameters to data types
## // (usual case): [n_par * n_data] * [n_par * n_data]
## parlam  = rep_matrix(lambdas, n_paths) .* parmap;
## // Sum probability over nodes on each path
## for (i in 1:n_nodes) {
##  parlam2[i,] = col_sums(parlam[(node_starts[i]):(node_ends[i]),]);
##  }
## // then take product  to get probability of data type on path
## for (i in 1:n_paths) {
##   w_0[i] = prod(parlam2[,i]);
##  }
##  // last (if confounding): map to n_data columns instead of n_paths
##  w = map'*w_0;
##   // Extend/reduce to cover all observed data types
##  w_full = E * w;
## }
## model {
## // Dirichlet distributions
## for (i in 1:n_param_sets) {
##   target += dirichlet_lpdf(lambdas[l_starts[i]:l_ends[i]]  |
##     lambdas_prior[l_starts[i] :l_ends[i]]);
##   target += -n_param_each[i] * log(sum_gammas[i]);
##  }
## // Multinomials
## // Note with censoring event_probabilities might not sum to 1
## for (i in 1:n_strategies) {
##   target += multinomial_lpmf(
##   Y[strategy_starts[i]:strategy_ends[i]] |
##     w_full[strategy_starts[i]:strategy_ends[i]]/
##      sum(w_full[strategy_starts[i]:strategy_ends[i]]));
##  }
## }
## // Option to export distribution of causal types
## generated quantities{
## vector[n_types] types;
## if (keep_type_distribution == 1){
## for (i in 1:n_types) {
##    types[i] = prod(P[, i].*lambdas + 1 - P[,i]);
## }}
##  if (keep_type_distribution == 0){
##     types = rep_vector(1, n_types);
##  }
## }
</code></pre>
</div>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" defer></script>
</body>
</html>
